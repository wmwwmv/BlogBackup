title: oracle中关于单引号和双引号的问题
date: 2016-11-23 15:50:12
categories: Oracle
tags:
- Oracle
fancybox:
comments: true
permalink: 
description: 
---

```sql
--在ORACLE中，单引号有两个作用:  
--  1:字符串是由单引号引用  
--  2:转义。  
--单引号的使用是就近配对，即就近原则。而在单引号充当转义角色时相对不好理解  
--1.从第二个单引号开始被视为转义符，如果第二个单引号后面还有单引号（哪怕只有一个）。        
SQL> select '''' result from dual;  
RESULT  
------  
'      
--第二个单引号被作为转义符,第三个单引号被转义,可将sql写成这样更好理解:  
select ' '' ' from dual;  
output:'  
//  
--2.连接符‘||’导致了新一轮的转义：  
--  连接符号‘||’左右的单引号没有任何的关系，  
--  除非‘||’是作为字符串的一部分（这在动态SQL中很常见）。  
SQL> select 'name'||'''' result from dual;  
RESULT  
------  
name'   
--理解:||后面的作为一个字符串,即前后是',中间又是一个密集型单引号串'',因此第一个为转义功能.  
SQL> select 'name''''' result from dual;  
RESULT  
------  
name''  
--第一个和最后一个单引号作为字符串引用符,中间四个单引号两两转义.  
//  
--oracle中使用双引号：  
--1)一般来说，字符串中的双引号仅仅被当作一个普通字符进行处理。  
--此时，双引号不需要成对出现：  
SQL> select 'hh24"小时""mi""分"""ss"秒"' results from dual;  
RESULTS  
-------------------------  
hh24"小时""mi""分"""ss"秒"  
//  
--2)当出现在to_char的格式字符串中时，双引号有特殊的作用，  
--就是将非法的格式符包装起来，避免出现ORA-01821: date format not recognized错误。  
--也就是说，去掉双引号和其包含的字符后，剩下的应该是一个合法的格式串。  
--to_char在处理格式字符串时，会忽略双引号：  
SQL> select to_char(sysdate,'hh24"小时"mi"分"ss"秒"') results from dual;  
RESULTS  
--------------  
06小时39分51秒  
//  
--格式串为'hh24"小时"mi"分"ss"秒"'；  
--去掉双引号部分后，剩下的是'hh24miss'，是一个合法的格式串。  
--不过即使真不知道双引号的这个用法，也可以这样来处理，虽然麻烦一点：  
select to_char(sysdate, 'hh24') || '小时' ||  
       to_char(sysdate, 'mi') || '分' ||  
       to_char(sysdate, 'ss') || '秒'  
       AS RESULT   
from dual;  
RESULT  
--------------  
06小时40分18秒  

```